{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adlan/multas/multas/app/asesor/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { LayoutGrid, LogOut, RefreshCcw, User } from \"lucide-react\";\r\n\r\ntype Plantilla = {\r\n  id: number;\r\n  nombre?: string;\r\n  subproducto?: string;\r\n  url?: string | null;\r\n};\r\n\r\nexport default function DashboardAsesor() {\r\n  const router = useRouter();\r\n  const [plantillas, setPlantillas] = useState<Plantilla[]>([]);\r\n  const [user, setUser] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [toast, setToast] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetchPlantillas();\r\n    const loggedUser = localStorage.getItem(\"username\") || \"Asesor\";\r\n    setUser(loggedUser);\r\n  }, []);\r\n\r\n  const fetchPlantillas = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/plantillas\", { cache: \"no-store\" });\r\n      if (!res.ok) throw new Error(\"Error al cargar plantillas\");\r\n      const data = await res.json();\r\n      setPlantillas(Array.isArray(data) ? data : []);\r\n    } catch {\r\n      setPlantillas([\r\n        { id: 1, nombre: \"Plantilla A\", subproducto: \"Crédito Personal\", url: null },\r\n        { id: 2, nombre: \"Plantilla B\", subproducto: \"Préstamo Vehicular\", url: null },\r\n      ]);\r\n      setToast(\"Mostrando datos de ejemplo\");\r\n      setTimeout(() => setToast(\"\"), 1500);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"username\");\r\n    router.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen text-slate-900 bg-gradient-to-b from-slate-50 via-sky-50/60 to-slate-100\">\r\n      <div className=\"flex min-h-screen\">\r\n        {/* Sidebar */}\r\n        <aside\r\n          className=\"\r\n            fixed left-0 top-0 h-screen w-[280px]\r\n            bg-white/55 backdrop-blur-xl\r\n            border-r border-slate-200/60\r\n            shadow-[0_10px_40px_rgba(15,23,42,0.08)]\r\n            z-50\r\n          \"\r\n        >\r\n          <div className=\"p-5 flex items-center gap-3\">\r\n            <div\r\n              className=\"\r\n                h-10 w-10 rounded-2xl\r\n                bg-white/70\r\n                border border-slate-200/70\r\n                shadow-sm\r\n                flex items-center justify-center\r\n                font-semibold text-slate-900\r\n              \"\r\n            >\r\n              G\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <div className=\"font-semibold text-slate-900 leading-5\">Asesor</div>\r\n              <div className=\"text-xs text-slate-500 truncate\">Panel de trabajo</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mx-5 border-t border-slate-200/70\" />\r\n\r\n          {/* Usuario */}\r\n          <div className=\"p-5\">\r\n            <div className=\"rounded-3xl bg-white/60 border border-slate-200/70 shadow-sm p-4\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"h-10 w-10 rounded-2xl bg-sky-100 border border-sky-200/70 flex items-center justify-center\">\r\n                  <User size={18} className=\"text-sky-700\" />\r\n                </div>\r\n                <div className=\"min-w-0\">\r\n                  <div className=\"font-semibold text-slate-900 truncate\">{user}</div>\r\n                  <div className=\"text-xs text-slate-500\">Sesión activa</div>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"\r\n                  mt-4 w-full\r\n                  px-4 py-3 rounded-2xl\r\n                  bg-gradient-to-r from-slate-800 to-sky-700\r\n                  text-white font-semibold\r\n                  shadow-sm\r\n                  hover:from-slate-900 hover:to-sky-800\r\n                  transition\r\n                  inline-flex items-center justify-center gap-2\r\n                \"\r\n              >\r\n                <LogOut size={18} />\r\n                Cerrar sesión\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Acciones */}\r\n          <div className=\"px-5\">\r\n            <button\r\n              onClick={fetchPlantillas}\r\n              className=\"\r\n                w-full\r\n                px-4 py-3 rounded-2xl\r\n                bg-white/60\r\n                border border-slate-200/70\r\n                text-slate-700 font-medium\r\n                hover:bg-white\r\n                transition\r\n                inline-flex items-center justify-center gap-2\r\n              \"\r\n              type=\"button\"\r\n            >\r\n              <RefreshCcw size={18} />\r\n              Refrescar\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"absolute bottom-5 left-5 right-5\">\r\n            <div className=\"text-xs text-slate-500 text-center\">\r\n              © {new Date().getFullYear()} Gestión\r\n            </div>\r\n          </div>\r\n        </aside>\r\n\r\n        {/* Main */}\r\n        <main className=\"flex-1 min-h-screen px-6 sm:px-10 py-8 sm:py-10\" style={{ paddingLeft: 280 }}>\r\n          {/* Header */}\r\n          <div className=\"flex items-start justify-between gap-4\">\r\n            <div>\r\n              <h1 className=\"text-3xl sm:text-4xl font-semibold tracking-tight\">Dashboard Asesor</h1>\r\n              <p className=\"text-slate-500 mt-2\">Selecciona una plantilla para editar.</p>\r\n            </div>\r\n\r\n            <div\r\n              className=\"\r\n                hidden sm:flex items-center gap-2\r\n                px-4 py-2 rounded-2xl\r\n                bg-white/60 backdrop-blur-xl\r\n                border border-slate-200/60\r\n                shadow-sm\r\n                text-sm text-slate-600\r\n              \"\r\n            >\r\n              <LayoutGrid size={16} />\r\n              Plantillas\r\n            </div>\r\n          </div>\r\n\r\n          {toast && (\r\n            <div className=\"mt-5 rounded-2xl bg-white/60 border border-slate-200/60 px-4 py-3 text-slate-700 shadow-sm\">\r\n              {toast}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-8 border-t border-slate-200/70\" />\r\n\r\n          {/* Grid */}\r\n          <section className=\"mt-8\">\r\n            {loading ? (\r\n              <div className=\"rounded-3xl bg-white/55 border border-slate-200/60 shadow-[0_8px_30px_rgba(15,23,42,0.06)] p-6 text-slate-500\">\r\n                Cargando plantillas…\r\n              </div>\r\n            ) : plantillas.length === 0 ? (\r\n              <div className=\"rounded-3xl bg-white/55 border border-slate-200/60 shadow-[0_8px_30px_rgba(15,23,42,0.06)] p-6 text-slate-500\">\r\n                No hay plantillas disponibles.\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {plantillas.map((p) => (\r\n                  <Link\r\n                    key={p.id}\r\n                    href={`/asesor/plantilla/${p.id}`}\r\n                    className=\"\r\n                      group\r\n                      rounded-3xl\r\n                      bg-white/55 backdrop-blur-xl\r\n                      border border-slate-200/60\r\n                      shadow-[0_8px_30px_rgba(15,23,42,0.06)]\r\n                      p-5\r\n                      hover:shadow-[0_12px_40px_rgba(15,23,42,0.10)]\r\n                      hover:-translate-y-0.5\r\n                      transition\r\n                      flex flex-col\r\n                    \"\r\n                  >\r\n                    {p.url ? (\r\n                      <img\r\n                        src={p.url}\r\n                        alt={p.subproducto || `Plantilla ${p.id}`}\r\n                        className=\"w-full h-36 object-cover rounded-2xl border border-slate-200/60 bg-white/60\"\r\n                      />\r\n                    ) : (\r\n                      <div className=\"w-full h-36 rounded-2xl border border-slate-200/60 bg-white/60 flex items-center justify-center text-slate-500\">\r\n                        Sin imagen\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"mt-4 min-w-0\">\r\n                      <h2 className=\"text-lg font-semibold text-slate-900 truncate\">\r\n                        {p.nombre || `Plantilla #${p.id}`}\r\n                      </h2>\r\n                      <p className=\"text-sm text-slate-500 mt-1 truncate\">\r\n                        Subproducto: {p.subproducto || \"—\"}\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"mt-5\">\r\n                      <div\r\n                        className=\"\r\n                          w-full\r\n                          text-center\r\n                          px-4 py-3 rounded-2xl\r\n                          bg-gradient-to-r from-sky-700 to-slate-800\r\n                          text-white font-semibold\r\n                          shadow-sm\r\n                          group-hover:from-sky-800 group-hover:to-slate-900\r\n                          transition\r\n                        \"\r\n                      >\r\n                        Editar →\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </section>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}