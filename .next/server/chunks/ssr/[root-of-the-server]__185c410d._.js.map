{"version":3,"sources":["../../../../../../multas/multas/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../multas/multas/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../multas/multas/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../multas/multas/app/gestion/multas/components/NewTemplateForm.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nexport default function NewTemplateForm({ onCreated }: { onCreated?: () => void }) {\r\n  const [cuentaBancaria, setCuentaBancaria] = useState(\"\");\r\n  const [subproducto, setSubproducto] = useState(\"\");\r\n  const [imagenFile, setImagenFile] = useState<File | null>(null);\r\n\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState<string | null>(null);\r\n\r\n  // ✅ Limpia el objectURL al desmontar o cambiar\r\n  useEffect(() => {\r\n    return () => {\r\n      if (previewUrl) URL.revokeObjectURL(previewUrl);\r\n    };\r\n  }, [previewUrl]);\r\n\r\n  function clearForm() {\r\n    setCuentaBancaria(\"\");\r\n    setSubproducto(\"\");\r\n    setImagenFile(null);\r\n    setMessage(null);\r\n\r\n    if (previewUrl) URL.revokeObjectURL(previewUrl);\r\n    setPreviewUrl(null);\r\n\r\n    const fileInput = document.getElementById(\"fileInputTemplate\") as HTMLInputElement | null;\r\n    if (fileInput) fileInput.value = \"\";\r\n  }\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setMessage(null);\r\n\r\n    if (!cuentaBancaria.trim() || !subproducto.trim()) {\r\n      setMessage(\"Completa número de cuenta y subproducto.\");\r\n      return;\r\n    }\r\n\r\n    if (!imagenFile) {\r\n      setMessage(\"Selecciona una imagen.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"cuenta_bancaria\", cuentaBancaria);\r\n      formData.append(\"subproducto\", subproducto);\r\n      formData.append(\"url\", imagenFile, imagenFile.name);\r\n\r\n      const res = await fetch(\"/api/plantillas\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setMessage(data?.error || \"Error al crear plantilla\");\r\n        return;\r\n      }\r\n\r\n      setMessage(\"Plantilla creada ✔\");\r\n      clearForm();\r\n      onCreated?.();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"Error de conexión\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className=\"\r\n        rounded-3xl\r\n        bg-white/55 backdrop-blur-xl\r\n        border border-slate-200/60\r\n        shadow-[0_8px_30px_rgba(15,23,42,0.06)]\r\n        p-5 sm:p-6\r\n        space-y-4\r\n      \"\r\n    >\r\n      {/* Header */}\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-slate-900\">Nueva plantilla</h3>\r\n          <p className=\"text-sm text-slate-500 mt-1\">\r\n            Completa los datos y sube una imagen.\r\n          </p>\r\n        </div>\r\n\r\n        <span\r\n          className=\"\r\n            hidden sm:inline-flex\r\n            text-xs text-slate-600\r\n            px-3 py-1.5 rounded-2xl\r\n            bg-white/60 border border-slate-200/60\r\n            shadow-sm\r\n          \"\r\n        >\r\n          Plantillas\r\n        </span>\r\n      </div>\r\n\r\n      {/* Inputs */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n        <div className=\"space-y-1.5\">\r\n          <label className=\"text-xs font-medium text-slate-600\">Cuenta bancaria</label>\r\n          <input\r\n            value={cuentaBancaria}\r\n            onChange={(e) => setCuentaBancaria(e.target.value)}\r\n            name=\"cuenta_bancaria\"\r\n            placeholder=\"Número de cuenta\"\r\n            className=\"\r\n              w-full\r\n              rounded-2xl\r\n              bg-white/70\r\n              border border-slate-200/70\r\n              px-4 py-3\r\n              text-slate-900 placeholder:text-slate-400\r\n              shadow-sm\r\n              outline-none\r\n              focus:ring-2 focus:ring-sky-300/60\r\n              focus:border-sky-200/60\r\n              transition\r\n            \"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-1.5\">\r\n          <label className=\"text-xs font-medium text-slate-600\">Subproducto</label>\r\n          <input\r\n            value={subproducto}\r\n            onChange={(e) => setSubproducto(e.target.value)}\r\n            name=\"subproducto\"\r\n            placeholder=\"Subproducto\"\r\n            className=\"\r\n              w-full\r\n              rounded-2xl\r\n              bg-white/70\r\n              border border-slate-200/70\r\n              px-4 py-3\r\n              text-slate-900 placeholder:text-slate-400\r\n              shadow-sm\r\n              outline-none\r\n              focus:ring-2 focus:ring-sky-300/60\r\n              focus:border-sky-200/60\r\n              transition\r\n            \"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* File */}\r\n      <div className=\"space-y-1.5\">\r\n        <label className=\"text-xs font-medium text-slate-600\">Imagen</label>\r\n        <input\r\n          id=\"fileInputTemplate\"\r\n          name=\"url\"\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={(e) => {\r\n            const f = e.target.files?.[0] || null;\r\n            setImagenFile(f);\r\n\r\n            if (previewUrl) URL.revokeObjectURL(previewUrl);\r\n            setPreviewUrl(f ? URL.createObjectURL(f) : null);\r\n          }}\r\n          className=\"\r\n            w-full\r\n            rounded-2xl\r\n            bg-white/70\r\n            border border-slate-200/70\r\n            px-4 py-3\r\n            text-slate-700\r\n            shadow-sm\r\n            outline-none\r\n            focus:ring-2 focus:ring-sky-300/60\r\n            focus:border-sky-200/60\r\n            transition\r\n            file:mr-3\r\n            file:rounded-xl\r\n            file:border file:border-slate-200/60\r\n            file:bg-white/70\r\n            file:px-3 file:py-2\r\n            file:text-slate-700\r\n            hover:file:bg-white\r\n          \"\r\n        />\r\n        <p className=\"text-xs text-slate-500\">\r\n          Formatos recomendados: JPG, PNG.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Preview */}\r\n      {previewUrl && (\r\n        <div\r\n          className=\"\r\n            rounded-3xl\r\n            bg-white/45\r\n            border border-slate-200/60\r\n            p-3\r\n            shadow-sm\r\n          \"\r\n        >\r\n          <img\r\n            src={previewUrl}\r\n            alt=\"Vista previa\"\r\n            className=\"w-full max-w-md h-48 object-cover rounded-2xl border border-slate-200/60\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Actions */}\r\n      <div className=\"text-black flex flex-wrap gap-2 pt-1\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"\r\n            px-4 py-3\r\n            rounded-2xl\r\n            bg-gradient-to-r from-sky-700 to-slate-800\r\n            text-white font-semibold\r\n            shadow-sm\r\n            hover:from-sky-800 hover:to-slate-900\r\n            transition\r\n            disabled:opacity-60 disabled:cursor-not-allowed\r\n          \"\r\n        >\r\n          {loading ? \"Creando...\" : \"Crear plantilla\"}\r\n        </button>\r\n\r\n        <button\r\n          type=\"button\"\r\n          onClick={clearForm}\r\n          className=\"\r\n            px-4 py-3\r\n            rounded-2xl\r\n            bg-white/60\r\n            border border-slate-200/70\r\n            text-slate-700 font-medium\r\n            hover:bg-white\r\n            transition\r\n          \"\r\n        >\r\n          Limpiar\r\n        </button>\r\n      </div>\r\n\r\n      {/* Message */}\r\n      {message && (\r\n        <div\r\n          className=\"\r\n            rounded-2xl\r\n            bg-white/60\r\n            border border-slate-200/60\r\n            px-4 py-3\r\n            text-sm\r\n            text-slate-700\r\n          \"\r\n        >\r\n          {message}\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}