module.exports=[19460,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored["react-ssr"].ReactServerDOMTurbopackClient},81927,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored.contexts.HooksClientContext},75384,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},95696,(a,b,c)=>{"use strict";b.exports=a.r(18622)},24183,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored["react-ssr"].ReactJsxRuntime},34041,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored["react-ssr"].React},89117,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored.contexts.AppRouterContext},22247,a=>{"use strict";var b=a.i(24183),c=a.i(34041);function d({onCreated:a}){let[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null);function p(){e(""),g(""),i(null),o(null),j&&URL.revokeObjectURL(j),k(null);let a=document.getElementById("fileInputTemplate");a&&(a.value="")}async function q(b){if(b.preventDefault(),o(null),!d.trim()||!f.trim())return void o("Completa número de cuenta y subproducto.");if(!h)return void o("Selecciona una imagen.");m(!0);try{let b=new FormData;b.append("cuenta_bancaria",d),b.append("subproducto",f),b.append("url",h,h.name);let c=await fetch("/api/plantillas",{method:"POST",body:b}),e=await c.json();if(!c.ok)return void o(e?.error||"Error al crear plantilla");o("Plantilla creada ✔"),p(),a?.()}catch(a){console.error(a),o("Error de conexión")}finally{m(!1)}}return(0,c.useEffect)(()=>()=>{j&&URL.revokeObjectURL(j)},[j]),(0,b.jsxs)("form",{onSubmit:q,className:"   rounded-3xl   bg-white/55 backdrop-blur-xl   border border-slate-200/60   shadow-[0_8px_30px_rgba(15,23,42,0.06)]   p-5 sm:p-6   space-y-4   ",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Nueva plantilla"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Completa los datos y sube una imagen."})]}),(0,b.jsx)("span",{className:"   hidden sm:inline-flex   text-xs text-slate-600   px-3 py-1.5 rounded-2xl   bg-white/60 border border-slate-200/60   shadow-sm   ",children:"Plantillas"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Cuenta bancaria"}),(0,b.jsx)("input",{value:d,onChange:a=>e(a.target.value),name:"cuenta_bancaria",placeholder:"Número de cuenta",className:"   w-full   rounded-2xl   bg-white/70   border border-slate-200/70   px-4 py-3   text-slate-900 placeholder:text-slate-400   shadow-sm   outline-none   focus:ring-2 focus:ring-sky-300/60   focus:border-sky-200/60   transition   "})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Subproducto"}),(0,b.jsx)("input",{value:f,onChange:a=>g(a.target.value),name:"subproducto",placeholder:"Subproducto",className:"   w-full   rounded-2xl   bg-white/70   border border-slate-200/70   px-4 py-3   text-slate-900 placeholder:text-slate-400   shadow-sm   outline-none   focus:ring-2 focus:ring-sky-300/60   focus:border-sky-200/60   transition   "})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Imagen"}),(0,b.jsx)("input",{id:"fileInputTemplate",name:"url",type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0]||null;i(b),j&&URL.revokeObjectURL(j),k(b?URL.createObjectURL(b):null)},className:"   w-full   rounded-2xl   bg-white/70   border border-slate-200/70   px-4 py-3   text-slate-700   shadow-sm   outline-none   focus:ring-2 focus:ring-sky-300/60   focus:border-sky-200/60   transition   file:mr-3   file:rounded-xl   file:border file:border-slate-200/60   file:bg-white/70   file:px-3 file:py-2   file:text-slate-700   hover:file:bg-white   "}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Formatos recomendados: JPG, PNG."})]}),j&&(0,b.jsx)("div",{className:"   rounded-3xl   bg-white/45   border border-slate-200/60   p-3   shadow-sm   ",children:(0,b.jsx)("img",{src:j,alt:"Vista previa",className:"w-full max-w-md h-48 object-cover rounded-2xl border border-slate-200/60"})}),(0,b.jsxs)("div",{className:"text-black flex flex-wrap gap-2 pt-1",children:[(0,b.jsx)("button",{type:"submit",disabled:l,className:"   px-4 py-3   rounded-2xl   bg-gradient-to-r from-sky-700 to-slate-800   text-white font-semibold   shadow-sm   hover:from-sky-800 hover:to-slate-900   transition   disabled:opacity-60 disabled:cursor-not-allowed   ",children:l?"Creando...":"Crear plantilla"}),(0,b.jsx)("button",{type:"button",onClick:p,className:"   px-4 py-3   rounded-2xl   bg-white/60   border border-slate-200/70   text-slate-700 font-medium   hover:bg-white   transition   ",children:"Limpiar"})]}),n&&(0,b.jsx)("div",{className:"   rounded-2xl   bg-white/60   border border-slate-200/60   px-4 py-3   text-sm   text-slate-700   ",children:n})]})}a.s(["default",()=>d])},47509,a=>{"use strict";var b=a.i(24183),c=a.i(34041),d=a.i(1266),e=a.i(22247);function f(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null);async function m(){h(!0),j(null);try{let a=await fetch("/api/plantillas",{cache:"no-store"}),b=await a.json();if(!a.ok){f([]),j(b?.error?String(b.error):"Error cargando plantillas");return}if(!Array.isArray(b)){f([]),j("Respuesta inválida del servidor");return}let c=b.map(a=>({id:a.id,numero_cuenta:a.cuenta_bancaria,subproducto:a.subproducto,imagen_url:a.url,creado_en:a.creado_en}));f(c)}catch(a){console.error("Error cargando plantillas:",a),j("Error de conexión al cargar plantillas"),f([])}finally{h(!1)}}async function n(a){if(confirm("¿Eliminar plantilla?"))try{l(a);let b=await fetch(`/api/plantillas/${a}`,{method:"DELETE"}),c=await b.json().catch(()=>({}));b.ok?m():alert(c?.error||"No se pudo eliminar")}catch(a){console.error("Error eliminando plantilla:",a),alert("Error de conexión")}finally{l(null)}}return(0,c.useEffect)(()=>{m()},[]),(0,b.jsx)("div",{className:"space-y-10 text-slate-900",children:(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-10",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Nueva plantilla"}),(0,b.jsx)(e.default,{onCreated:m})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Plantillas existentes"}),g?(0,b.jsx)("p",{className:"text-slate-500",children:"Cargando..."}):i?(0,b.jsxs)("p",{className:"text-red-600",children:["Error: ",i]}):0===a.length?(0,b.jsx)("p",{className:"text-slate-500",children:"No hay plantillas registradas."}):(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsxs)("div",{className:"   flex items-center gap-4   rounded-3xl   bg-white/55 backdrop-blur-xl   border border-slate-200/60   shadow-[0_8px_30px_rgba(15,23,42,0.06)]   p-4   ",children:[(0,b.jsx)("img",{src:`${a.imagen_url}?v=${a.id}`,alt:a.subproducto,className:"   w-20 h-20 object-contain   rounded-2xl   border border-slate-200/60   bg-white/60   ",onError:a=>{a.currentTarget.src="/no-image.png"}}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"font-semibold text-lg text-slate-900 truncate",children:a.subproducto}),(0,b.jsx)("div",{className:"text-slate-600 text-sm truncate",children:a.numero_cuenta}),(0,b.jsx)("div",{className:"text-slate-500 text-xs mt-1",children:a.creado_en?new Date(a.creado_en).toLocaleString():""})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 min-w-[110px]",children:[(0,b.jsx)(d.default,{href:`/gestion/multas/plantillas/${a.id}`,className:"   text-center   px-3 py-2   rounded-xl   bg-sky-600/90   text-white text-sm font-medium   shadow-sm   hover:bg-sky-700   transition   focus:outline-none focus:ring-2 focus:ring-sky-300/60   ",children:"Ver"}),(0,b.jsx)("button",{onClick:()=>n(a.id),disabled:k===a.id,className:"   px-3 py-2   rounded-xl   bg-red-600/90   text-white text-sm font-medium   shadow-sm   hover:bg-red-700   transition   disabled:opacity-40 disabled:cursor-not-allowed   ",children:k===a.id?"Eliminando...":"Eliminar"})]})]},a.id))})]})]})})}a.s(["default",()=>f])},55922,a=>{"use strict";var b=a.i(24183),c=a.i(52921),d=a.i(47509);function e(){return(0,b.jsxs)("div",{className:"min-h-screen text-slate-900",children:[(0,b.jsx)(c.default,{}),(0,b.jsxs)("main",{className:"   min-h-screen   px-6 sm:px-10   py-8 sm:py-10   bg-gradient-to-b from-slate-50 via-sky-50/60 to-slate-100   transition-[padding] duration-300   ",style:{paddingLeft:"min(var(--sidebar-w), 88px)"},children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl sm:text-4xl font-semibold tracking-tight",children:"Multas"}),(0,b.jsx)("p",{className:"text-slate-500 mt-2",children:"Administración y gestión de multas."})]}),(0,b.jsxs)("div",{className:"   hidden sm:flex items-center gap-2   px-4 py-2 rounded-2xl   bg-white/60 backdrop-blur-xl   border border-slate-200/60   shadow-sm   text-sm text-slate-600   ",children:[(0,b.jsx)("span",{className:"h-2 w-2 rounded-full bg-sky-500"}),"Gestión"]})]}),(0,b.jsx)("div",{className:"mt-8 border-t border-slate-200/70"}),(0,b.jsx)("section",{className:"   mt-8   rounded-3xl   bg-white/55 backdrop-blur-xl   border border-slate-200/60   shadow-[0_8px_30px_rgba(15,23,42,0.06)]   p-4 sm:p-6   ",children:(0,b.jsx)("div",{className:"rounded-2xl bg-white/50 border border-slate-200/60 p-4 sm:p-6",children:(0,b.jsx)(d.default,{})})})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__66a94eb5._.js.map