module.exports=[19460,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored["react-ssr"].ReactServerDOMTurbopackClient},81927,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored.contexts.HooksClientContext},75384,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},95696,(a,b,c)=>{"use strict";b.exports=a.r(18622)},24183,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored["react-ssr"].ReactJsxRuntime},34041,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored["react-ssr"].React},89117,(a,b,c)=>{"use strict";b.exports=a.r(95696).vendored.contexts.AppRouterContext},92034,a=>{"use strict";var b=a.i(24183),c=a.i(52921),d=a.i(34041);function e(){let[a,c]=(0,d.useState)([]),[e,f]=(0,d.useState)(!1),[g,h]=(0,d.useState)(""),[i,j]=(0,d.useState)(""),[k,l]=(0,d.useState)("asesor"),[m,n]=(0,d.useState)(null),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(null),[s,t]=(0,d.useState)(null),[u,v]=(0,d.useState)(null);async function w(){f(!0),v(null);try{let a=await fetch("/api/usuarios",{cache:"no-store"});if(!a.ok)throw Error(`HTTP ${a.status}`);let b=await a.json();c(Array.isArray(b)?b:[])}catch(a){console.error("fetchUsers error",a),v("No se pudieron cargar los usuarios")}finally{f(!1)}}function x(){n(null),h(""),j(""),l("asesor")}function y(){x(),t(null),v(null)}async function z(){p(!0),t(null),v(null);try{if(!g.trim())return void v("El username es requerido");if(!m){if(!i.trim())return void v("Password es requerido al crear usuario");let a={username:g.trim(),password:i.trim(),role:k},b=await fetch("/api/usuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok)throw Error(c?.error||`Error ${b.status}`);t("Usuario creado ✔"),y(),await w();return}let a={username:g.trim(),role:k};i&&""!==i.trim()&&(a.password=i.trim());let b=await fetch(`/api/usuarios/${m.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok)throw Error(c?.error||`Error ${b.status}`);t("Usuario actualizado ✔"),x(),await w()}catch(a){console.error("save error",a),v(a?.message||"Error al guardar")}finally{p(!1)}}async function A(a){if(confirm("¿Seguro que deseas eliminar este usuario?")){r(a),t(null),v(null);try{let b=await fetch(`/api/usuarios/${a}`,{method:"DELETE"}),c=await b.json().catch(()=>({}));if(!b.ok)throw Error(c?.error||`Error ${b.status}`);t("Usuario eliminado ✔"),await w()}catch(a){console.error("delete error",a),v(a?.message||"Error al eliminar")}finally{r(null)}}}return(0,d.useEffect)(()=>{w()},[]),(0,b.jsxs)("div",{className:"space-y-6 text-slate-900",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:m?"Editar usuario":"Crear usuario"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Administra usuarios y roles del sistema."})]}),(0,b.jsx)("button",{onClick:y,className:"   px-4 py-2 rounded-2xl   bg-white/60 backdrop-blur-xl   border border-slate-200/70   text-slate-700 font-medium   shadow-sm   hover:bg-white   transition   ",children:"Nuevo"})]}),(0,b.jsxs)("div",{className:"   rounded-3xl   bg-white/55 backdrop-blur-xl   border border-slate-200/60   shadow-[0_8px_30px_rgba(15,23,42,0.06)]   p-5 sm:p-6   space-y-4   ",children:[s&&(0,b.jsx)("div",{className:"rounded-2xl bg-emerald-50/80 border border-emerald-200/60 px-4 py-3 text-emerald-800 text-sm",children:s}),u&&(0,b.jsx)("div",{className:"rounded-2xl bg-rose-50/80 border border-rose-200/60 px-4 py-3 text-rose-800 text-sm",children:u}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Username"}),(0,b.jsx)("input",{placeholder:"Username",value:g,onChange:a=>h(a.target.value),className:"   w-full rounded-2xl   bg-white/70   border border-slate-200/70   px-4 py-3   text-slate-900 placeholder:text-slate-400   shadow-sm   outline-none   focus:ring-2 focus:ring-sky-300/60   focus:border-sky-200/60   transition   "})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Password"}),(0,b.jsx)("input",{placeholder:m?"Dejar vacío = sin cambiar":"Password",value:i,onChange:a=>j(a.target.value),type:"password",className:"   w-full rounded-2xl   bg-white/70   border border-slate-200/70   px-4 py-3   text-slate-900 placeholder:text-slate-400   shadow-sm   outline-none   focus:ring-2 focus:ring-sky-300/60   focus:border-sky-200/60   transition   "})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Rol"}),(0,b.jsxs)("select",{value:k,onChange:a=>l(a.target.value),className:"   w-full rounded-2xl   bg-white/70   border border-slate-200/70   px-4 py-3   text-slate-900   shadow-sm   outline-none   focus:ring-2 focus:ring-sky-300/60   focus:border-sky-200/60   transition   ",children:[(0,b.jsx)("option",{value:"admin",children:"admin"}),(0,b.jsx)("option",{value:"asesor",children:"asesor"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 pt-1",children:[(0,b.jsx)("button",{onClick:z,disabled:o,className:"   px-4 py-3 rounded-2xl   bg-gradient-to-r from-sky-700 to-slate-800   text-white font-semibold   shadow-sm   hover:from-sky-800 hover:to-slate-900   transition   disabled:opacity-60 disabled:cursor-not-allowed   ",children:o?"Guardando...":m?"Guardar cambios":"Crear usuario"}),m&&(0,b.jsx)("button",{onClick:y,className:"   px-4 py-3 rounded-2xl   bg-white/60   border border-slate-200/70   text-slate-700 font-medium   hover:bg-white   transition   ",children:"Cancelar"})]})]}),(0,b.jsxs)("div",{className:"   rounded-3xl   bg-white/55 backdrop-blur-xl   border border-slate-200/60   shadow-[0_8px_30px_rgba(15,23,42,0.06)]   p-4 sm:p-6   ",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Usuarios"}),(0,b.jsxs)("span",{className:"text-sm text-slate-500",children:[a.length," total"]})]}),(0,b.jsx)("div",{className:"mt-4 h-px w-full bg-gradient-to-r from-transparent via-slate-200/80 to-transparent"}),e?(0,b.jsx)("div",{className:"text-slate-500 mt-4",children:"Cargando usuarios..."}):0===a.length?(0,b.jsx)("div",{className:"text-slate-500 mt-4",children:"No hay usuarios."}):(0,b.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,b.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-xs uppercase tracking-wide text-slate-500",children:[(0,b.jsx)("th",{className:"py-3 px-3 border-b border-slate-200/70",children:"ID"}),(0,b.jsx)("th",{className:"py-3 px-3 border-b border-slate-200/70",children:"Username"}),(0,b.jsx)("th",{className:"py-3 px-3 border-b border-slate-200/70",children:"Rol"}),(0,b.jsx)("th",{className:"py-3 px-3 border-b border-slate-200/70 text-right",children:"Acciones"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-white/60 transition",children:[(0,b.jsx)("td",{className:"py-3 px-3 border-b border-slate-200/60 text-slate-700",children:a.id}),(0,b.jsx)("td",{className:"py-3 px-3 border-b border-slate-200/60 font-medium text-slate-900",children:a.username}),(0,b.jsx)("td",{className:"py-3 px-3 border-b border-slate-200/60",children:(0,b.jsx)("span",{className:["inline-flex items-center px-3 py-1 rounded-2xl text-xs font-medium border","admin"===a.role?"bg-amber-50/80 text-amber-800 border-amber-200/60":"bg-sky-50/80 text-sky-800 border-sky-200/60"].join(" "),children:a.role})}),(0,b.jsx)("td",{className:"py-3 px-3 border-b border-slate-200/60",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>(function(a){n(a),h(a.username),j(""),l(a.role),t(null),v(null)})(a),className:"   px-3 py-2 rounded-xl   bg-white/70   border border-slate-200/70   text-slate-700 text-sm font-medium   hover:bg-white   transition   ",children:"Editar"}),(0,b.jsx)("button",{onClick:()=>A(a.id),disabled:q===a.id,className:"   px-3 py-2 rounded-xl   bg-red-600/90   text-white text-sm font-medium   shadow-sm   hover:bg-red-700   transition   disabled:opacity-50 disabled:cursor-not-allowed   ",children:q===a.id?"Eliminando...":"Eliminar"})]})})]},a.id))})]})})]})]})}function f(){return(0,b.jsxs)("div",{className:"min-h-screen text-slate-900",children:[(0,b.jsx)(c.default,{}),(0,b.jsxs)("main",{className:"   min-h-screen   px-6 sm:px-10   py-8 sm:py-10   bg-gradient-to-b from-slate-50 via-sky-50/60 to-slate-100   transition-[padding] duration-300   ",style:{paddingLeft:"min(var(--sidebar-w), 88px)"},children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl sm:text-4xl font-semibold tracking-tight",children:"Gestión de Usuarios"}),(0,b.jsx)("p",{className:"text-slate-500 mt-2",children:"Crear, editar y eliminar usuarios del sistema."})]}),(0,b.jsxs)("div",{className:"   hidden sm:flex items-center gap-2   px-4 py-2 rounded-2xl   bg-white/60 backdrop-blur-xl   border border-slate-200/60   shadow-sm   text-sm text-slate-600   ",children:[(0,b.jsx)("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Admin"]})]}),(0,b.jsx)("section",{className:"mt-8",children:(0,b.jsx)(e,{})})]})]})}a.s(["default",()=>f],92034)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__9ed9654f._.js.map